<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cadastro de empresa</title>
    <link rel="stylesheet" href="/css/cadastro_style.css">
</head>
<header>
    <nav class="navbar">
        <a href="/" class="nav-logo">Pancora</a>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="/cadastro-paciente" class="nav-link">Cadastro de paciente</a>
            </li>
            <li class="nav-item">
                <a href="/cadastro-empresa" class="nav-link">Cadastro de empresa</a>
            </li>
            <li class="nav-item">
                <a href="/cadastro-sintomas" class="nav-link">Cadastro de sintoma</a>
            </li>
            <li class="nav-item">
                <a href="/lista-pacientes" class="nav-link">Quadro de Pacientes</a>
            </li>
            <li class="nav-item">
                <a href="/usuario" class="nav-link">Usuário</a>
            </li>
        </ul>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </nav>
</header>
<body>
<div class="container">

    <h1>Cadastro de empresa</h1>

    <section class="form-section">
        <form class="form" onsubmit="return false">

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="razaoSocial">Razão Social</label>
                    <input class="input" id="razaoSocial" name="razaoSocial" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="nomeFantasia">Nome fantasia</label>
                    <input class="input" id="nomeFantasia" name="nomeFantasia" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="ramo">Ramo de Atuação</label>
                    <input class="input" id="ramo" name="ramo" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="cnpj">CNPJ</label>
                    <input class="input" id="cnpj" name="cnpj" type="number" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="estado">Estado</label>
                    <input class="input" id="estado" name="estado" type="text" required>
                    <select>

                    </select>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="cidade">Cidade</label>
                    <input class="input" id="cidade" name="cidade" type="number" required>
                    <select>

                    </select>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="bairro">Bairro</label>
                    <input class="input" id="bairro" name="bairro" type="number" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="rua">Rua</label>
                    <input class="input" id="rua" name="rua" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="numero">Número</label>
                    <input class="input" id="numero" name="numero" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="cep">Cep</label>
                    <input class="input" id="cep" name="cep" type="number" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="email">Email</label>
                    <input class="input" id="email" name="email" type="text" required>
                </div>
            </div>


            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="telefone">Telefone</label>
                    <input class="input" id="telefone" name="telefone" type="text" required>
                </div>
            </div>

            <div class="frame">
                <button class="btn" id="cadastro-button" onclick="cadastrarEmpresa()">Cadastrar</button>
                <a id="voltar-button" href="/" class="btn">
                    Voltar
                </a>
            </div>
        </form>
    </section>
</div>
<canvas class="background"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.2/particles.min.js"></script>
<script>
    var particles = Particles.init({
	selector: '.background',
      color: ['#4DCCC6', '#404B69', '#DBEDF3'],
    connectParticles: true
    });
</script>
<script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous">
</script>
<script>
const hamburger = document.querySelector(".hamburger");
const navMenu = document.querySelector(".nav-menu");

hamburger.addEventListener("click", mobileMenu);

function mobileMenu() {
    hamburger.classList.toggle("active");
    navMenu.classList.toggle("active");
}

const navLink = document.querySelectorAll(".nav-link");

navLink.forEach(n => n.addEventListener("click", closeMenu));

function closeMenu() {
    hamburger.classList.remove("active");
    navMenu.classList.remove("active");
}

function cadastrarEmpresa(){
    var razaoSocial = $("#razaoSocial").val();
    var nomeFantasia = $("#nomeFantasia").val();
    var ramo = $("#ramo").val();
    var cnpj = $("#cnpj").val();
    var cidade = $("#cidade").val();
//    var estado = $("#estado").val();
    var rua = $("#rua").val();
    var numero = $("#numero").val();
    var email = $("#email").val();
    var telefone = $("#telefone").val();
    var cep = $("#cep").val();
    var bairro = $("#bairro").val();

    $.ajax({
               method : "POST",
               url : "/cadastro-empresa",
               data : JSON.stringify({cnpj : cnpj,
                                      razaoSocial : razaoSocial,
                                      nomeFantasia : nomeFantasia,
                                      telefone : telefone,
                                      email : email,
                                      ramoAtividade : ramo,
                                      ruaEndereco : rua,
                                      numeroEndereco : numero,
                                      cep : cep,
                                      bairroId : bairro,
                                      cidadeId : cidade}),
               contentType : "application/json; charset=utf-8",
               success : function(response){
                   $("#nomeFantasia").val(response.id);
                   alert("Cadastro realizado com sucesso!");
               },
			   error: function(xhr, status, errorThrown){
                   alert("Erro ao cadastrar." + xhr.responseText);
               }
           });
}
</script>
</body>
<footer className="footer mt-auto py-3 bg-dark">
    <div className="footer container">
        <p className="text-light">App desenvolvido por <a class="link-github" href="https://github.com/Ana-Epping" target="_blank" rel="noreferrer">Ana Luiza Epping</a>,
            <a class="link-github" href="https://github.com/BrunaZimmermannTregnago" target="_blank" rel="noreferrer">Bruna Zimmermann Tregnago</a>,
            <a class="link-github" href="https://github.com/evelynperondi" target="_blank" rel="noreferrer">Évelyn Perondi Filimberti</a> e
            <a class="link-github" href="https://github.com/isadoragbocalon" target="_blank" rel="noreferrer">Isadora Gambatto Bocalon</a></p>
        <p className="text-light"><a class="link-unoesc" href="https://www.unoesc.edu.br/" target="_blank" rel="noreferrer"><strong>Ciência da Computação - UNOESC SMO</strong></a><br/>
    </div>
</footer>
</html>