<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cadastro de paciente</title>
    <link rel="stylesheet" href="css/cadastro_style.css">
</head>
<header>
    <nav class="navbar">
        <a href="/" class="nav-logo">Pancora</a>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="/cadastro-paciente" class="nav-link">Cadastro de paciente</a>
            </li>
            <li class="nav-item">
                <a href="/cadastro-empresa" class="nav-link">Cadastro de empresa</a>
            </li>
            <li class="nav-item">
                <a href="/cadastro-sintomas" class="nav-link">Cadastro de sintoma</a>
            </li>
            <li class="nav-item">
                <a href="/lista-pacientes" class="nav-link">Quadro de Pacientes</a>
            </li>
            <li class="nav-item">
                <a href="/usuario" class="nav-link">Usuário</a>
            </li>
        </ul>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </nav>
</header>
<body>
<div class="container">

    <h1>Cadastro de Paciente</h1>

    <section class="form-section">
        <form class="form" onsubmit="return false">

            <h2 class="form-section-heading">Informações pessoais</h2>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="nome">Nome Completo</label>
                    <input class="input" id="nome" name="nome" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="cpf">CPF</label>
                    <input class="input" id="cpf" name="cpf" type="number" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="telefone">Telefone</label>
                    <input class="input" id="telefone" name="telefone" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="email">Email</label>
                    <input class="input" id="email" name="email" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="datanascimento">Data de nascimento</label>
                    <input class="input" id="datanascimento" name="datanascimento" type="date" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="peso">Peso</label>
                    <input class="input" id="peso" name="peso" type="number" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="altura">Altura</label>
                    <input class="input" id="altura" name="altura" type="number" step="0.01" min="0" max="3.00" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="sexo">Sexo</label>
                    <input class="input" id="sexo" name="sexo" type="text" required>
                </div>
            </div>

            <h2 class="form-section-heading">Endereço</h2>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="estado">Estado</label>
                    <input class="input" id="estado" name="estado" type="number" required>
                    <select>

                    </select>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="cidade">Cidade</label>
                    <input class="input" id="cidade" name="cidade" type="number" required>
                    <select>

                    </select>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="bairro">Bairro</label>
                    <input class="input" id="bairro" name="bairro" type="number" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="rua">Rua</label>
                    <input class="input" id="rua" name="rua" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="numero">Número</label>
                    <input class="input" id="numero" name="numero" type="text" required>
                </div>
            </div>

            <div class="field-wrap">
                <div class="field">
                    <label class="label" for="cep">Cep</label>
                    <input class="input" id="cep" name="cep" type="number" required>
                </div>
            </div>

            <div class="frame">
                <button type="button" class="btn" id="cadastro-button" onclick="cadastrarPaciente()">Cadastrar</button>
                <a id="voltar-button" href="/index" class="btn">
                    Voltar
                </a>
            </div>
        </form>
    </section>
</div>
<canvas class="background"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.2/particles.min.js"></script>
<script>
    var particles = Particles.init({
	selector: '.background',
  color: ['#4DCCC6', '#404B69', '#DBEDF3'],
  connectParticles: true
});
</script>
<script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous">
</script>
<script>
const hamburger = document.querySelector(".hamburger");
const navMenu = document.querySelector(".nav-menu");

hamburger.addEventListener("click", mobileMenu);

function mobileMenu() {
    hamburger.classList.toggle("active");
    navMenu.classList.toggle("active");
}

const navLink = document.querySelectorAll(".nav-link");

navLink.forEach(n => n.addEventListener("click", closeMenu));

function closeMenu() {
    hamburger.classList.remove("active");
    navMenu.classList.remove("active");
}

function cadastrarPaciente(){
    var cpf = $("#cpf").val();
    var nome = $("#nome").val();
    var telefone = $("#telefone").val();
    var email = $("#email").val();
    var dataNascimento = $("#datanascimento").val();
    var peso = $("#peso").val();
    var altura = $("#altura").val();
    var rua = $("#rua").val();
    var numero = $("#numero").val();
    var cep = $("#cep").val();
    var bairroId = $("#bairro").val();
    var cidadeId = $("#cidade").val();
    var tipoUsuario = 1;
    var sexo = $("#sexo").val();

    $.ajax({
               method : "POST",
               url : "/cadastro-paciente",
               data : JSON.stringify({cpf : cpf,
                                      nome : nome,
                                      telefone : telefone,
                                      email : email,
                                      dataNascimento: dataNascimento,
                                      peso : peso,
                                      altura : altura,
                                      ruaEndereco : rua,
                                      numeroEndereco: numero,
                                      cep : cep,
                                      bairroId : bairroId,
                                      cidadeId : cidadeId,
                                      tipoUsuarioId : tipoUsuario,
                                      sexo : sexo}),
               contentType : "application/json; charset=utf-8",
               success : function(response){
                   $("#nome").val(response.id);
                   alert("Cadastro realizado com sucesso!");
               },
			   error: function(xhr, status, errorThrown){
                   alert("Erro ao cadastrar." + xhr.responseText);
               }
           });
}
</script>
</body>
<footer className="footer mt-auto py-3 bg-dark">
    <div className="footer container">
        <p className="text-light">App desenvolvido por <a class="link-github" href="https://github.com/Ana-Epping" target="_blank" rel="noreferrer">Ana Luiza Epping</a>,
            <a class="link-github" href="https://github.com/BrunaZimmermannTregnago" target="_blank" rel="noreferrer">Bruna Zimmermann Tregnago</a>,
            <a class="link-github" href="https://github.com/evelynperondi" target="_blank" rel="noreferrer">Évelyn Perondi Filimberti</a> e
            <a class="link-github" href="https://github.com/isadoragbocalon" target="_blank" rel="noreferrer">Isadora Gambatto Bocalon</a></p>
        <p className="text-light"><a class="link-unoesc" href="https://www.unoesc.edu.br/" target="_blank" rel="noreferrer"><strong>Ciência da Computação - UNOESC SMO</strong></a><br/>
    </div>
</footer>
</html>