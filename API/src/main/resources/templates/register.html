<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cadastro</title>
    <link rel="stylesheet/less" type="text/css" href="css/style.less">
</head>
<body>

<div class="wrapper">
    <div class="container">
        <h1>Pancora</h1>
        <h3>Cadastro</h3>
        <form class="form" onsubmit="return false">
            <input type="text" id="username" name="username" placeholder="Username">
            <input type="text" id="email" name="email" placeholder="Email">
            <input type="password" id="password" name="password" placeholder="Senha">
            <button type="button" class="btn" id="login-button" onclick="cadastrarUsuario()">Cadastrar-se</button>
        </form>
        <p >Já possui cadastro? <a href="/login" style="text-decoration:none" ><font class="login" color="white">Login</font></a> </p>
    </div>

    <ul class="bg-bubbles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>
<script>
function cadastrarUsuario(){
    var username = $("#username").val();
    var email = $("#email").val();
    var password = $("#password").val();

    if(username == ""){
        alert("Informe seu nome de usuário!");
        $("#username").focus();
        return;
    }else if(email == ""){
        alert("Informe seu email!");
        $("#email").focus();
        return;
    }else if(password == ""){
        alert("Informe sua senha!");
        $("#password").focus();
        return;
    }else{
        $.ajax({
             method : "POST",
             url : "/registration",
             data : JSON.stringify({username : username,
                                    email : email,
                                    password : password}),
             contentType : "application/json; charset=utf-8",
             success : function(response){
                 $("#username").val(response.id);
                 alert("Obrigado por se cadastrar! Valide sua conta através do link de confirmação que enviamos para o seu email.");
             },
             error : function(xhr, status, errorThrown){
                 alert("Erro ao cadastrar." + xhr.responseText);
             }
        });
    }
 }
</script>
<script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous">
</script>
<script src="https://cdn.jsdelivr.net/npm/less@4.1.1" ></script>
</body>
</html>